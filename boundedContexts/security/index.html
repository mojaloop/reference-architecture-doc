<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Security BC | Mojaloop Reference Architecture Docs 1.0</title>
    <meta name="description" content="">
    
    <meta name="description" content="Mojaloop Reference Architecture 1.0">
    <meta name="theme-color" content="#00a3ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/reference-architecture-doc/assets/css/0.styles.a9215771.css" as="style"><link rel="preload" href="/reference-architecture-doc/assets/js/app.47e5814f.js" as="script"><link rel="preload" href="/reference-architecture-doc/assets/js/2.3ac1e7fc.js" as="script"><link rel="preload" href="/reference-architecture-doc/assets/js/10.77d1b646.js" as="script"><link rel="prefetch" href="/reference-architecture-doc/assets/js/11.f017ab1c.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/12.c7026b16.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/13.4febd9c0.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/14.57caae8c.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/15.b07c017b.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/16.3ac154af.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/17.8243e98d.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/18.3a69e714.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/19.0b7c03b1.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/20.61b63a5d.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/21.666f1c41.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/22.be4b8586.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/23.d7daab1f.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/24.e0a18238.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/25.a07d8052.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/26.787f61cf.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/27.73a40601.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/28.55a9778f.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/29.37a5f920.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/3.e8dadafc.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/30.21d27da2.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/31.b7f305ac.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/32.3f3135ee.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/33.75f280dd.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/34.e91333d3.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/35.a858bbcb.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/4.d9c80617.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/5.e4e4f7f9.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/6.125a8a02.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/7.518ab3a0.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/8.bdea22b7.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/9.fb12be10.js">
    <link rel="stylesheet" href="/reference-architecture-doc/assets/css/0.styles.a9215771.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="main-docs-wrapper"><div class="main-content-wrapper"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/reference-architecture-doc/" class="home-link router-link-active"><img src="/reference-architecture-doc/mojaloop_logo_med.png" alt="Mojaloop Reference Architecture Docs 1.0" class="logo"> <span class="site-name can-hide">Mojaloop Reference Architecture Docs 1.0</span></a> <!----> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/reference-architecture-doc/introduction/" class="nav-link">
  Introduction
  <!----></a></div><div class="nav-item"><a href="https://mojaloop.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mojaloop
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div> <!----></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/reference-architecture-doc/introduction/" class="nav-link">
  Introduction
  <!----></a></div><div class="nav-item"><a href="https://mojaloop.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mojaloop
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/reference-architecture-doc/introduction/" class="sidebar-link">Introduction</a></li><li><a href="/reference-architecture-doc/refarch/" class="sidebar-link">Reference Architecture Overview</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/reference-architecture-doc/boundedContexts/" class="sidebar-heading clickable router-link-active open active"><span>Bounded Contexts</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49.484 28.284" class="sidebar-arrow down"><g transform="translate(-229 -126.358)"><rect fill="currentColor" width="35" height="5" rx="2" transform="translate(229 151.107) rotate(-45)"></rect> <rect fill="currentColor" width="35" height="5" rx="2" transform="translate(274.949 154.642) rotate(-135)"></rect></g></svg></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/reference-architecture-doc/boundedContexts/commonTermsConventions/" class="sidebar-link">Common Terms &amp; Conventions</a></li><li><a href="/reference-architecture-doc/boundedContexts/accountLookupAndDiscovery/" class="sidebar-link">Account Lookup &amp; Discovery</a></li><li><a href="/reference-architecture-doc/boundedContexts/accountsAndBalances/" class="sidebar-link">Accounts &amp; Balances</a></li><li><a href="/reference-architecture-doc/boundedContexts/quotingAgreement/" class="sidebar-link">Quoting/Agreements</a></li><li><a href="/reference-architecture-doc/boundedContexts/auditing/" class="sidebar-link">Auditing</a></li><li><a href="/reference-architecture-doc/boundedContexts/fspInteropApi/" class="sidebar-link">FSP Interop API</a></li><li><a href="/reference-architecture-doc/boundedContexts/logging/" class="sidebar-link">Logging</a></li><li><a href="/reference-architecture-doc/boundedContexts/notificationsAndAlerts/" class="sidebar-link">Notifications And Alerts</a></li><li><a href="/reference-architecture-doc/boundedContexts/participantLifecycleManagement/" class="sidebar-link">Participant Lifecycle Management</a></li><li><a href="/reference-architecture-doc/boundedContexts/reporting/" class="sidebar-link">Reporting</a></li><li><a href="/reference-architecture-doc/boundedContexts/scheduling/" class="sidebar-link">Scheduling</a></li><li><a href="/reference-architecture-doc/boundedContexts/security/" aria-current="page" class="active sidebar-link">Security</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/security/#overview" class="active sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/security/#terms" class="sidebar-link">Terms</a></li><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/security/#use-cases" class="sidebar-link">Use Cases</a></li></ul></li><li><a href="/reference-architecture-doc/boundedContexts/settlements/" class="sidebar-link">Settlements</a></li><li><a href="/reference-architecture-doc/boundedContexts/thirdPartyApi/" class="sidebar-link">Third Party API</a></li><li><a href="/reference-architecture-doc/boundedContexts/transfers/" class="sidebar-link">Transfers</a></li></ul></section></li><li><a href="/reference-architecture-doc/boundedContexts/commonInterfaces/" class="sidebar-link">Common Interface List</a></li><li><a href="/reference-architecture-doc/howToImplement/" class="sidebar-link">How to Implement</a></li><li><a href="/reference-architecture-doc/glossary/" class="sidebar-link">Glossary</a></li><li><a href="/reference-architecture-doc/furtherReading/" class="sidebar-link">Further Reading</a></li></ul> </aside> <main class="page"> <div class="content content__default"><h1 id="security-bc"><a href="#security-bc" class="header-anchor">#</a> Security BC</h1> <h2 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h2> <p>The protocol is request and response based, and the used transport protocol is secure Hypertext Transfer Protocol Secure (HTTPS). All services use the HTTP POST and GET methods. Both the request and response bodies are encoded in JSON-formatted text.</p> <h2 id="terms"><a href="#terms" class="header-anchor">#</a> Terms</h2> <p>Terms with specific and commonly accepted meaning within the Security Bounded Context.</p> <table><thead><tr><th>Module</th> <th>Description</th></tr></thead> <tbody><tr><td><strong>Crypto providers</strong></td> <td>Adapter that will provide cryptographic services and Key Management Services</td></tr> <tr><td><strong>IAM</strong></td> <td>Identity and Access Management. Adapter that will provide services for user management, menus, profiles, roles and permissions.</td></tr> <tr><td><strong>AuthN</strong></td> <td>Authentication module. Requires userid and password and returns a JWT token</td></tr> <tr><td><strong>AuthZ</strong></td> <td>Authorization module. Requires JWT and certificate (public key). Verifies JWT ROLES and signature</td></tr> <tr><td><strong>JWT</strong></td> <td>JSON Web Token. Returned after a successful user authentication. Contains user details, ROLES and signature.</td></tr> <tr><td><strong>KMS</strong></td> <td>Key Management System. Manages cryptographic keys lifecycle (definition, creation and retirement). It is part of the Cyrpto subsystem</td></tr></tbody></table> <h2 id="use-cases"><a href="#use-cases" class="header-anchor">#</a> Use Cases</h2> <h3 id="bc-user-operator-login-authn"><a href="#bc-user-operator-login-authn" class="header-anchor">#</a> BC User / Operator login (AuthN)</h3> <h4 id="description"><a href="#description" class="header-anchor">#</a> Description</h4> <p>The login function requires that the user id and a secret key be passed in the http body. The response contains a signed JWT token. The signature is generated by the Crypto subsystem. The login is performed by the Authorization services or IAM.</p> <h4 id="flow-diagram"><a href="#flow-diagram" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_SecAuth-ucUserOpsLogin(AuthN)_Apr22_1829.96ad6adf.png" alt="Use Case - BC User / Operator Login (AuthN)"></p> <blockquote><p>UC Workflow Diagram: BC User/Operator Login (AuthN)</p></blockquote> <h3 id="bc-authorization-model-authz"><a href="#bc-authorization-model-authz" class="header-anchor">#</a> BC Authorization Model (AuthZ)</h3> <h4 id="description-2"><a href="#description-2" class="header-anchor">#</a> Description</h4> <p>IAM will provide users / groups, roles and privileges associations. Each BC will also have a list of related roles. When an API function or microservice<br>
is called, the JWT signature is verified using the public key and the role provided in the JWT is compared to the role associated with the BC. If the signature verification and the role are successfully verified, the API function or microservice is executed.</p> <h4 id="flow-diagram-2"><a href="#flow-diagram-2" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_SecAuth-ucAuthModel_Apr22_1829.b4f4b005.png" alt="Use Case - BC Authorization Model (AuthZ)"></p> <blockquote><p>UC Workflow Diagram: BC Authorization Model (AuthZ)</p></blockquote> <h3 id="bc-bootstrap"><a href="#bc-bootstrap" class="header-anchor">#</a> BC Bootstrap</h3> <h4 id="description-3"><a href="#description-3" class="header-anchor">#</a> Description</h4> <p>At bootstrap, the BC will send the list of possible privileges. This is done once per deployement of a new version.</p> <h4 id="flow-diagram-3"><a href="#flow-diagram-3" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_SecAuth-ucBcBootstrap-OncePerNewVer_Apr22_1829.ad3ba0d7.png" alt="Use Case - BC Bootstrap"></p> <blockquote><p>UC Workflow Diagram: BC Bootstrap</p></blockquote> <h3 id="bc-startup"><a href="#bc-startup" class="header-anchor">#</a> BC Startup</h3> <h4 id="description-4"><a href="#description-4" class="header-anchor">#</a> Description</h4> <p>At startup the BC will request authentication issuer public keys from Security BC Crypto / KMS subsystems and the list of roles / privileges Security BC IAM subsystem. A local crypto library signature verification function will verfiy the JWT signature and the roles in the JWT will be compared with the local list of roles obtained from the central authorization service.</p> <h5 id="flow-diagram-4"><a href="#flow-diagram-4" class="header-anchor">#</a> Flow Diagram</h5> <p><img src="/reference-architecture-doc/assets/img/ML2RA_SecAuth-ucBcStartup_Apr22_1829.599e09c3.png" alt="Use Case - BC Startup"></p> <blockquote><p>UC Workflow Diagram: BC Startup</p></blockquote> <h3 id="role-privilege-association"><a href="#role-privilege-association" class="header-anchor">#</a> Role / Privilege association</h3> <h4 id="description-5"><a href="#description-5" class="header-anchor">#</a> Description</h4> <p>Roles are associated with a number of privileges.</p> <h4 id="flow-diagram-5"><a href="#flow-diagram-5" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_SecAuth-ucRolePriviledgeAssoc_Apr22_1829.fe030b14.png" alt="Use Case - BC Startup"></p> <blockquote><p>UC Workflow Diagram: Role / Priviledge Association</p></blockquote> <h3 id="example-query-call"><a href="#example-query-call" class="header-anchor">#</a> Example Query / call</h3> <h4 id="description-6"><a href="#description-6" class="header-anchor">#</a> Description</h4> <p>Client Authorization should be performed by using an access token. A client first needs to request the Authorization Service to create an access token for the user who requests to access the interface. The user is authenticated in the Authorization Service. The created access token is then used for authorization in the interface.<br>
To use the access token, the client must set the Authorization HTTP header to Bearer [access_token] in each request to the interface.</p> <h4 id="flow-diagram-6"><a href="#flow-diagram-6" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_SecAuth-ucExampleApiQueryCall_Apr22_1829.4eb5536c.png" alt="Use Case - Example API Query/Call"></p> <blockquote><p>UC Workflow Diagram: Example API Query/Call</p></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/25/2022, 3:21:49 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/reference-architecture-doc/boundedContexts/scheduling/" class="prev">
        Scheduling
      </a></span> <span class="next"><a href="/reference-architecture-doc/boundedContexts/settlements/">
        Settlements
      </a>
      →
    </span></p></div> </main> <!----></div></div> <!----></div><div class="global-ui"><!----></div></div>
    
    <script src="/reference-architecture-doc/assets/js/app.47e5814f.js" defer></script><script src="/reference-architecture-doc/assets/js/2.3ac1e7fc.js" defer></script><script src="/reference-architecture-doc/assets/js/10.77d1b646.js" defer></script>
  </body>
</html>
