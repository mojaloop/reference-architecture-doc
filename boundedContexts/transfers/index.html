<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Transfers BC | Mojaloop Reference Architecture Docs 1.0</title>
    <meta name="description" content="">
    
    <meta name="description" content="Mojaloop Reference Architecture 1.0">
    <meta name="theme-color" content="#00a3ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/reference-architecture-doc/assets/css/0.styles.a9215771.css" as="style"><link rel="preload" href="/reference-architecture-doc/assets/js/app.47e5814f.js" as="script"><link rel="preload" href="/reference-architecture-doc/assets/js/2.3ac1e7fc.js" as="script"><link rel="preload" href="/reference-architecture-doc/assets/js/6.125a8a02.js" as="script"><link rel="prefetch" href="/reference-architecture-doc/assets/js/10.77d1b646.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/11.f017ab1c.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/12.c7026b16.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/13.4febd9c0.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/14.57caae8c.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/15.b07c017b.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/16.3ac154af.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/17.8243e98d.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/18.3a69e714.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/19.0b7c03b1.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/20.61b63a5d.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/21.666f1c41.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/22.be4b8586.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/23.d7daab1f.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/24.e0a18238.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/25.a07d8052.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/26.787f61cf.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/27.73a40601.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/28.55a9778f.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/29.37a5f920.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/3.e8dadafc.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/30.21d27da2.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/31.b7f305ac.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/32.3f3135ee.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/33.75f280dd.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/34.e91333d3.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/35.a858bbcb.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/4.d9c80617.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/5.e4e4f7f9.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/7.518ab3a0.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/8.bdea22b7.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/9.fb12be10.js">
    <link rel="stylesheet" href="/reference-architecture-doc/assets/css/0.styles.a9215771.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="main-docs-wrapper"><div class="main-content-wrapper"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/reference-architecture-doc/" class="home-link router-link-active"><img src="/reference-architecture-doc/mojaloop_logo_med.png" alt="Mojaloop Reference Architecture Docs 1.0" class="logo"> <span class="site-name can-hide">Mojaloop Reference Architecture Docs 1.0</span></a> <!----> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/reference-architecture-doc/introduction/" class="nav-link">
  Introduction
  <!----></a></div><div class="nav-item"><a href="https://mojaloop.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mojaloop
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div> <!----></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/reference-architecture-doc/introduction/" class="nav-link">
  Introduction
  <!----></a></div><div class="nav-item"><a href="https://mojaloop.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mojaloop
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/reference-architecture-doc/introduction/" class="sidebar-link">Introduction</a></li><li><a href="/reference-architecture-doc/refarch/" class="sidebar-link">Reference Architecture Overview</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/reference-architecture-doc/boundedContexts/" class="sidebar-heading clickable router-link-active open active"><span>Bounded Contexts</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49.484 28.284" class="sidebar-arrow down"><g transform="translate(-229 -126.358)"><rect fill="currentColor" width="35" height="5" rx="2" transform="translate(229 151.107) rotate(-45)"></rect> <rect fill="currentColor" width="35" height="5" rx="2" transform="translate(274.949 154.642) rotate(-135)"></rect></g></svg></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/reference-architecture-doc/boundedContexts/commonTermsConventions/" class="sidebar-link">Common Terms &amp; Conventions</a></li><li><a href="/reference-architecture-doc/boundedContexts/accountLookupAndDiscovery/" class="sidebar-link">Account Lookup &amp; Discovery</a></li><li><a href="/reference-architecture-doc/boundedContexts/accountsAndBalances/" class="sidebar-link">Accounts &amp; Balances</a></li><li><a href="/reference-architecture-doc/boundedContexts/quotingAgreement/" class="sidebar-link">Quoting/Agreements</a></li><li><a href="/reference-architecture-doc/boundedContexts/auditing/" class="sidebar-link">Auditing</a></li><li><a href="/reference-architecture-doc/boundedContexts/fspInteropApi/" class="sidebar-link">FSP Interop API</a></li><li><a href="/reference-architecture-doc/boundedContexts/logging/" class="sidebar-link">Logging</a></li><li><a href="/reference-architecture-doc/boundedContexts/notificationsAndAlerts/" class="sidebar-link">Notifications And Alerts</a></li><li><a href="/reference-architecture-doc/boundedContexts/participantLifecycleManagement/" class="sidebar-link">Participant Lifecycle Management</a></li><li><a href="/reference-architecture-doc/boundedContexts/reporting/" class="sidebar-link">Reporting</a></li><li><a href="/reference-architecture-doc/boundedContexts/scheduling/" class="sidebar-link">Scheduling</a></li><li><a href="/reference-architecture-doc/boundedContexts/security/" class="sidebar-link">Security</a></li><li><a href="/reference-architecture-doc/boundedContexts/settlements/" class="sidebar-link">Settlements</a></li><li><a href="/reference-architecture-doc/boundedContexts/thirdPartyApi/" class="sidebar-link">Third Party API</a></li><li><a href="/reference-architecture-doc/boundedContexts/transfers/" aria-current="page" class="active sidebar-link">Transfers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/transfers/#terms" class="active sidebar-link">Terms</a></li><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/transfers/#functional-overview-transfers-bulk" class="sidebar-link">Functional Overview - Transfers - Bulk</a></li><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/transfers/#use-cases" class="sidebar-link">Use Cases</a></li><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/transfers/#non-happy-path-use-case-variations" class="sidebar-link">Non-Happy Path Use Case Variations</a></li><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/transfers/#canonical-model" class="sidebar-link">Canonical Model</a></li><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/transfers/#concluding-comments" class="sidebar-link">Concluding Comments</a></li></ul></li></ul></section></li><li><a href="/reference-architecture-doc/boundedContexts/commonInterfaces/" class="sidebar-link">Common Interface List</a></li><li><a href="/reference-architecture-doc/howToImplement/" class="sidebar-link">How to Implement</a></li><li><a href="/reference-architecture-doc/glossary/" class="sidebar-link">Glossary</a></li><li><a href="/reference-architecture-doc/furtherReading/" class="sidebar-link">Further Reading</a></li></ul> </aside> <main class="page"> <div class="content content__default"><h1 id="transfers-bc"><a href="#transfers-bc" class="header-anchor">#</a> Transfers BC</h1> <p>The Transfers BC is responsible for orchestrating transfer requests.  It works in concert with a number of other BCs, notably Settlements, Scheduling, Participant Lifecycle Management, Accounts &amp; Balances, and the FSPIOP.</p> <h2 id="terms"><a href="#terms" class="header-anchor">#</a> Terms</h2> <p>The following terms are used in this BC, also known as a domain.</p> <table><thead><tr><th>Term</th> <th>Description</th></tr></thead> <tbody><tr><td><strong>Accounts</strong></td> <td>Refers to accounts used in all transfer activities.  They are used to record credit and debit positions, either temporarily in the case of accounts allocated for transfer purposes, or permanently in the case of final transfer updates to participant accounts.</td></tr> <tr><td><strong>Participant/Actor</strong></td> <td>Typically refers to DFSP Payer/Payee parties using Mojaloop.</td></tr> <tr><td><strong>IGS</strong></td> <td>Transfer settle method - Immediate Gross Settlement.  This process is typically used in high volume environments such as retail, and is used by individual and shared accounts.  In shared account environments, the system is capable of updating Participants balances by updating the proportional value of each Participants holds of the total funds available in the account</td></tr> <tr><td><strong>DNS</strong></td> <td>Transfer settlement method - Deferred Net Settlement. This process is frequently used in enviroments where a party of Participants engage in a single Transfer requiring settlement to all Participants. A typical example might include a scenario where raw materials are sold by Participant A to Participant B to manufacture into a finished product, which is then sold by Participant B back to Participant A. The switch calculates the proportional value that each Participant to the transaction is due, and settles this amount when the Settlement Window closes.</td></tr></tbody></table> <h2 id="functional-overview-transfers-bulk"><a href="#functional-overview-transfers-bulk" class="header-anchor">#</a> Functional Overview - Transfers - Bulk</h2> <p><img src="/reference-architecture-doc/assets/img/ML2RA_Trf_ucPerformTrfBulk_2022-03-22-a.ddaa0266.png" alt="Functional Overview - Transfers - Bulk"></p> <blockquote><p>UC Workflow Diagram: Functional Overview - Transfers - Bulk</p></blockquote> <h2 id="use-cases"><a href="#use-cases" class="header-anchor">#</a> Use Cases</h2> <h3 id="perform-transfer-universal-mode"><a href="#perform-transfer-universal-mode" class="header-anchor">#</a> Perform Transfer (universal mode)</h3> <h4 id="description"><a href="#description" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the BC to effect a Transfer using a method that excludes Actor intervention.</p> <h4 id="flow-diagram"><a href="#flow-diagram" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_Trf_ucPerformTrfUniMode_Mar22a.db35b3f1.png" alt="Perform Transfer (Universal Mode)"></p> <blockquote><p>UC Workflow Diagram: Perform Transfer (Universal Mode)</p></blockquote> <h3 id="perform-transfer-with-payee-confirmation"><a href="#perform-transfer-with-payee-confirmation" class="header-anchor">#</a> Perform Transfer with Payee Confirmation</h3> <h4 id="description-2"><a href="#description-2" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the BC to effect a Transfer using a method that includes Actor intervention.</p> <h4 id="flow-diagram-2"><a href="#flow-diagram-2" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_Trf_ucPerformTrfPayeeConfirm_Mar22a-P1-2.3cd9d052.png" alt="Use Case - Perform Transfer with Payee Confirmation"></p> <blockquote><p>UC Workflow Diagram: Perform Transfer With Payee Confirmation</p></blockquote> <h3 id="query-get-transfer"><a href="#query-get-transfer" class="header-anchor">#</a> Query (GET) Transfer</h3> <h4 id="description-3"><a href="#description-3" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the BC to effect a method by which a Participant status report Query can be completed.</p> <h4 id="flow-diagram-3"><a href="#flow-diagram-3" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_Trf_ucQueryTrfGET_Mar22a.ca7060ab.png" alt="Use Case - Query (GET) Transfer"></p> <blockquote><p>UC Flow Diagram: Query (GET) Transfer</p></blockquote> <h3 id="perform-transfer-duplicate-post-resend"><a href="#perform-transfer-duplicate-post-resend" class="header-anchor">#</a> Perform Transfer - Duplicate POST (Resend)</h3> <h4 id="description-4"><a href="#description-4" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the BC to effect a method by which a Duplicate Transfer request is completed.</p> <h4 id="flow-diagram-4"><a href="#flow-diagram-4" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_Trf_ucPerformTrfDuplicPostResend_Mar22a.561eb38f.png" alt="Use Case - Perform Transfer - Duplicate POST (Resend)"></p> <blockquote><p>UC Workflow Diagram: Perform Transfer - Duplicate POST (Resend)</p></blockquote> <h3 id="perform-transfer-duplicate-post-ignore"><a href="#perform-transfer-duplicate-post-ignore" class="header-anchor">#</a> Perform Transfer - Duplicate POST (Ignore)</h3> <h4 id="description-5"><a href="#description-5" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the BC to effect a method through which to ignore a Duplicate Transfer request.</p> <h4 id="flow-diagram-5"><a href="#flow-diagram-5" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_Trf_ucPerformTrfDuplicPostIgnore_Mar22a.c4657c83.png" alt="Use Case - Perform Transfer - Duplicate POST (Ignore)"></p> <blockquote><p>UC Workflow Diagram: Perform Transfer - Duplicate POST (Ignore)</p></blockquote> <h2 id="non-happy-path-use-case-variations"><a href="#non-happy-path-use-case-variations" class="header-anchor">#</a> Non-Happy Path Use Case Variations</h2> <h3 id="perform-transfer-payeefsp-rejects-transfer"><a href="#perform-transfer-payeefsp-rejects-transfer" class="header-anchor">#</a> Perform Transfer - PayeeFSP Rejects Transfer</h3> <h4 id="description-6"><a href="#description-6" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the BC to effect a method through which a Transfer request rejected by the Payee is terminated.</p> <h4 id="flow-diagram-6"><a href="#flow-diagram-6" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_Trf_ucPerformTrfPayeeFspReject_Mar22a.d8f805da.png" alt="Use Case - Perform Transfer - PayeeFSP Rejects Transfer"></p> <blockquote><p>UC Workflow Diagram: Perform Transfer - PayeeFSP Rejects Transfer</p></blockquote> <h3 id="perform-transfer-timeout-prepare"><a href="#perform-transfer-timeout-prepare" class="header-anchor">#</a> Perform Transfer - Timeout (Prepare)</h3> <h4 id="description-7"><a href="#description-7" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the BC to effect a method to terminate a Transfer Prepare request where a timeout threshold is exceeded.</p> <h4 id="flow-diagram-7"><a href="#flow-diagram-7" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_Trf_ucPerformTrfTimeoutPrepare_Mar22a.2c897229.png" alt="Use Case - Perform Transfer - Timeout (Prepare)"></p> <blockquote><p>UC Workflow Diagram: Perform Transfer - Timeout (Prepare)</p></blockquote> <h3 id="perform-transfer-timeout-pre-committed"><a href="#perform-transfer-timeout-pre-committed" class="header-anchor">#</a> Perform Transfer - Timeout (Pre-Committed)</h3> <h4 id="description-8"><a href="#description-8" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the BC to effect a method through which to terminate a Pre-Committed Transfer request where a timeout threshold is exceeded.</p> <h4 id="flow-diagram-8"><a href="#flow-diagram-8" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_Trf_ucPerformTrfTimeoutPreCommit_Mar22b-P1-2.f02f5b2a.png" alt="Use Case - Perform Transfer - Timeout (Pre-Committed)"></p> <blockquote><p>UC Workflow Diagram: Perform Transfer - Timeout (Pre-Committed)</p></blockquote> <h3 id="perform-transfer-timeout-post-committed"><a href="#perform-transfer-timeout-post-committed" class="header-anchor">#</a> Perform Transfer - Timeout (Post-Committed)</h3> <h4 id="description-9"><a href="#description-9" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the BC to effect a method through which to terminate a Post-Committed Transfer request where a timeout is exceeded.</p> <h4 id="flow-diagram-9"><a href="#flow-diagram-9" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_Trf_ucPerformTrfTimeoutPostCommit_Mar22a.07d95c1c.png" alt="Use Case - Perform Transfer - Timeout (Post-Committed)"></p> <blockquote><p>UC Workflow Diagram: Perform Transfer - Timeout (Post-Committed)</p></blockquote> <h3 id="perform-transfer-duplicate-post-none-matching"><a href="#perform-transfer-duplicate-post-none-matching" class="header-anchor">#</a> Perform Transfer - Duplicate POST (None Matching)</h3> <h4 id="description-10"><a href="#description-10" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the BC to effect a method through which to terminate a Non-Matching Duplicate Transfer request where a timeout is exceeded.</p> <h4 id="flow-diagram-10"><a href="#flow-diagram-10" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_Trf_ucPerformTrfTimeoutDuplicPostNoMatch_Mar22a.801cdc9a.png" alt="Use Case - Perform Transfer - Duplicate POST (None Matching)"></p> <blockquote><p>UC Workflow Diagram: Perform Transfer - Duplicate POST (None Matching)</p></blockquote> <h3 id="perform-transfer-payer-fsp-insufficient-liquidity"><a href="#perform-transfer-payer-fsp-insufficient-liquidity" class="header-anchor">#</a> Perform Transfer - Payer FSP Insufficient Liquidity</h3> <h4 id="description-11"><a href="#description-11" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the BC to effect a method through which to terminate a Transfer request that is failed due to the Payer having insufficient liquidity to cover the transaction fully.</p> <h4 id="flow-diagram-11"><a href="#flow-diagram-11" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_Trf_ucPayerFspInsufficientLiquid_Mar22a.19508aec.png" alt="Use Case - Perform Transfer - Payer FSP Insufficient Liquidity"></p> <blockquote><p>UC Workflow Diagram: Perform Transfer - Payer FSP Insufficient Liquidity</p></blockquote> <h3 id="perform-transfer-transfer-prepare-validation-failure-invalid-payer-participant"><a href="#perform-transfer-transfer-prepare-validation-failure-invalid-payer-participant" class="header-anchor">#</a> Perform Transfer - Transfer Prepare Validation Failure (Invalid Payer Participant)</h3> <h4 id="description-12"><a href="#description-12" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the BC to effect a method through which to terminate a Transfer Prepare request where the transaction validation is failed due to an invalid/non-existent Payer.</p> <h4 id="flow-diagram-12"><a href="#flow-diagram-12" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_Trf_ucTransferPrepValidationFail-InvalidPayer_Mar22a.9f0e8b66.png" alt="Use Case - Perform Transfer - Transfer Prepare Validation Failure (Invalid Payer Participant)"></p> <blockquote><p>UC Workflow Diagram: Perform Transfer - Transfer Prepare Validation Failure (Invalid Payer Participant)</p></blockquote> <h3 id="perform-transfer-transfer-prepare-validation-failure-invalid-payee-participant"><a href="#perform-transfer-transfer-prepare-validation-failure-invalid-payee-participant" class="header-anchor">#</a> Perform Transfer - Transfer Prepare Validation Failure (Invalid Payee Participant)</h3> <h4 id="description-13"><a href="#description-13" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the BC to effect a method through which to terminate a Transfer Prepare request where the transaction validation is failed due to an invalid/non-existent Payee.</p> <h4 id="flow-diagram-13"><a href="#flow-diagram-13" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_Trf_ucTransferPrepValidationFail-InvalidPayee_Mar22a.761e1a6f.png" alt="Use Case - Perform Transfer - Transfer Prepare Validation Failure (Invalid Payee Participant)"></p> <blockquote><p>UC Workflow Diagram: Perform Transfer - Transfer Prepare Validation Failure (Invalid Payee Participant)</p></blockquote> <h3 id="query-get-transfer-validation-failure-invalid-payer-participant"><a href="#query-get-transfer-validation-failure-invalid-payer-participant" class="header-anchor">#</a> Query (GET) Transfer - Validation Failure (Invalid Payer Participant)</h3> <h4 id="description-14"><a href="#description-14" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the BC to effect a method through which to terminate a Transfer status query where validation fails due to an invalid/non-existent Payer.</p> <h3 id="query-get-transfer-validation-failure-invalid-payee-participant"><a href="#query-get-transfer-validation-failure-invalid-payee-participant" class="header-anchor">#</a> Query (GET) Transfer - Validation Failure (Invalid Payee Participant)</h3> <h4 id="description-15"><a href="#description-15" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the BC to effect a method through which to terminate a Transfer status query where validation fails due to an invalid/non-existent Payee.</p> <h3 id="query-get-transfer-validation-failure-transfer-identifier-not-found"><a href="#query-get-transfer-validation-failure-transfer-identifier-not-found" class="header-anchor">#</a> Query (GET) Transfer - Validation Failure (Transfer Identifier Not Found)</h3> <h4 id="description-16"><a href="#description-16" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the BC to effect a method through which to terminate a Transfer status query where validation fails due to a Transfer Identifier Token not being found.</p> <h2 id="canonical-model"><a href="#canonical-model" class="header-anchor">#</a> Canonical Model</h2> <p>Mojaloop uses two canonical models to manage funds transfers, one for non-bulk transfers, and one for bulk transfers.</p> <h3 id="standard-canonical-model"><a href="#standard-canonical-model" class="header-anchor">#</a> Standard Canonical Model</h3> <ul><li>Transfer
<ul><li>transferId</li> <li>transferType</li> <li>quoteld (optional)</li> <li>settlementModelId</li> <li>Participants
<ul><li>Payer
<ul><li>participantId</li> <li>Accounts
<ul><li>Debit
<ul><li>accountId</li> <li>accountType</li> <li>currency</li></ul></li> <li>Credit
<ul><li>accountId</li> <li>accountType</li> <li>currency</li></ul></li></ul></li></ul></li> <li>Payee
<ul><li>ParticipantId</li> <li>Accounts
<ul><li>Debit
<ul><li>accountId</li> <li>accountType</li> <li>currency</li></ul></li> <li>Credit
<ul><li>accountId</li> <li>accountType</li> <li>currency</li></ul></li></ul></li></ul></li></ul></li> <li>Amount (Amount to transfer)
<ul><li>value (number)</li> <li>currency (ISO currency code)</li></ul></li> <li>expiration (ISO dateTime)</li> <li>ilpPacket</li> <li>Extensions</li></ul></li></ul> <h3 id="bulk-canonical-model"><a href="#bulk-canonical-model" class="header-anchor">#</a> Bulk Canonical Model</h3> <ul><li>Transfers
<ul><li>bulkId</li> <li>bulkQuoteId</li> <li>Transfers[]
<ul><li>Transfer* (see above)</li></ul></li></ul></li></ul> <h2 id="concluding-comments"><a href="#concluding-comments" class="header-anchor">#</a> Concluding Comments</h2> <ul><li>The Payer FSP should not be permitted to unilaterally time-out a transfer (irrespective of its expiration time), but should respect the Switch’s timeout decisions.</li> <li>Validation of cryptographic conditions and fulfillment would be managed by the Transfers BC as it is a fundamental component of the “transfer” process (i.e.: function is not specific to the FSPIOP language)</li> <li>The Transfers BC will apply the same validation pattern as the Quoting &amp; Party BC to validate Participants, to determine the ability of an Account to transact, or if a Participant is enabled as mutually exclusive.</li> <li>The Transfers BC is the single “source of truth” for all transfers, and is thus responsible for persisting the state/s of transfer’s.</li> <li>Disabling Participants already in a “prepared” state should not hinder processing of current transfers, however new transfer instructions received by the Transfers BC via the TransferPrepareAccountAllocated events should be declined.</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/2/2022, 11:28:21 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/reference-architecture-doc/boundedContexts/thirdPartyApi/" class="prev">
        Third Party API
      </a></span> <span class="next"><a href="/reference-architecture-doc/boundedContexts/commonInterfaces/">
        Common Interface List
      </a>
      →
    </span></p></div> </main> <!----></div></div> <!----></div><div class="global-ui"><!----></div></div>
    
    <script src="/reference-architecture-doc/assets/js/app.47e5814f.js" defer></script><script src="/reference-architecture-doc/assets/js/2.3ac1e7fc.js" defer></script><script src="/reference-architecture-doc/assets/js/6.125a8a02.js" defer></script>
  </body>
</html>
