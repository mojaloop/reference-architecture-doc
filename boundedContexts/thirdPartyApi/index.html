<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Third Party API BC | Mojaloop Reference Architecture Docs 1.0</title>
    <meta name="description" content="">
    
    <meta name="description" content="Mojaloop Reference Architecture 1.0">
    <meta name="theme-color" content="#00a3ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/reference-architecture-doc/assets/css/0.styles.a9215771.css" as="style"><link rel="preload" href="/reference-architecture-doc/assets/js/app.47e5814f.js" as="script"><link rel="preload" href="/reference-architecture-doc/assets/js/2.3ac1e7fc.js" as="script"><link rel="preload" href="/reference-architecture-doc/assets/js/4.d9c80617.js" as="script"><link rel="prefetch" href="/reference-architecture-doc/assets/js/10.77d1b646.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/11.f017ab1c.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/12.c7026b16.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/13.4febd9c0.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/14.57caae8c.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/15.b07c017b.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/16.3ac154af.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/17.8243e98d.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/18.3a69e714.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/19.0b7c03b1.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/20.61b63a5d.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/21.666f1c41.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/22.be4b8586.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/23.d7daab1f.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/24.e0a18238.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/25.a07d8052.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/26.787f61cf.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/27.73a40601.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/28.55a9778f.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/29.37a5f920.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/3.e8dadafc.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/30.21d27da2.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/31.b7f305ac.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/32.3f3135ee.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/33.75f280dd.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/34.e91333d3.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/35.a858bbcb.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/5.e4e4f7f9.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/6.125a8a02.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/7.518ab3a0.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/8.bdea22b7.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/9.fb12be10.js">
    <link rel="stylesheet" href="/reference-architecture-doc/assets/css/0.styles.a9215771.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="main-docs-wrapper"><div class="main-content-wrapper"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/reference-architecture-doc/" class="home-link router-link-active"><img src="/reference-architecture-doc/mojaloop_logo_med.png" alt="Mojaloop Reference Architecture Docs 1.0" class="logo"> <span class="site-name can-hide">Mojaloop Reference Architecture Docs 1.0</span></a> <!----> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/reference-architecture-doc/introduction/" class="nav-link">
  Introduction
  <!----></a></div><div class="nav-item"><a href="https://mojaloop.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mojaloop
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div> <!----></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/reference-architecture-doc/introduction/" class="nav-link">
  Introduction
  <!----></a></div><div class="nav-item"><a href="https://mojaloop.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mojaloop
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/reference-architecture-doc/introduction/" class="sidebar-link">Introduction</a></li><li><a href="/reference-architecture-doc/refarch/" class="sidebar-link">Reference Architecture Overview</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/reference-architecture-doc/boundedContexts/" class="sidebar-heading clickable router-link-active open active"><span>Bounded Contexts</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49.484 28.284" class="sidebar-arrow down"><g transform="translate(-229 -126.358)"><rect fill="currentColor" width="35" height="5" rx="2" transform="translate(229 151.107) rotate(-45)"></rect> <rect fill="currentColor" width="35" height="5" rx="2" transform="translate(274.949 154.642) rotate(-135)"></rect></g></svg></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/reference-architecture-doc/boundedContexts/commonTermsConventions/" class="sidebar-link">Common Terms &amp; Conventions</a></li><li><a href="/reference-architecture-doc/boundedContexts/accountLookupAndDiscovery/" class="sidebar-link">Account Lookup &amp; Discovery</a></li><li><a href="/reference-architecture-doc/boundedContexts/accountsAndBalances/" class="sidebar-link">Accounts &amp; Balances</a></li><li><a href="/reference-architecture-doc/boundedContexts/quotingAgreement/" class="sidebar-link">Quoting/Agreements</a></li><li><a href="/reference-architecture-doc/boundedContexts/auditing/" class="sidebar-link">Auditing</a></li><li><a href="/reference-architecture-doc/boundedContexts/fspInteropApi/" class="sidebar-link">FSP Interop API</a></li><li><a href="/reference-architecture-doc/boundedContexts/logging/" class="sidebar-link">Logging</a></li><li><a href="/reference-architecture-doc/boundedContexts/notificationsAndAlerts/" class="sidebar-link">Notifications And Alerts</a></li><li><a href="/reference-architecture-doc/boundedContexts/participantLifecycleManagement/" class="sidebar-link">Participant Lifecycle Management</a></li><li><a href="/reference-architecture-doc/boundedContexts/reporting/" class="sidebar-link">Reporting</a></li><li><a href="/reference-architecture-doc/boundedContexts/scheduling/" class="sidebar-link">Scheduling</a></li><li><a href="/reference-architecture-doc/boundedContexts/security/" class="sidebar-link">Security</a></li><li><a href="/reference-architecture-doc/boundedContexts/settlements/" class="sidebar-link">Settlements</a></li><li><a href="/reference-architecture-doc/boundedContexts/thirdPartyApi/" aria-current="page" class="active sidebar-link">Third Party API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/thirdPartyApi/#terms" class="active sidebar-link">Terms</a></li><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/thirdPartyApi/#use-cases" class="sidebar-link">Use Cases</a></li><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/thirdPartyApi/#linking-scenarios" class="sidebar-link">Linking Scenarios</a></li><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/thirdPartyApi/#transfer-scenarios" class="sidebar-link">Transfer Scenarios</a></li></ul></li><li><a href="/reference-architecture-doc/boundedContexts/transfers/" class="sidebar-link">Transfers</a></li></ul></section></li><li><a href="/reference-architecture-doc/boundedContexts/commonInterfaces/" class="sidebar-link">Common Interface List</a></li><li><a href="/reference-architecture-doc/howToImplement/" class="sidebar-link">How to Implement</a></li><li><a href="/reference-architecture-doc/glossary/" class="sidebar-link">Glossary</a></li><li><a href="/reference-architecture-doc/furtherReading/" class="sidebar-link">Further Reading</a></li></ul> </aside> <main class="page"> <div class="content content__default"><h1 id="third-party-api-bc"><a href="#third-party-api-bc" class="header-anchor">#</a> Third Party API BC</h1> <p>The Third Party API BC has been implemented with the Mojaloop 2.0 Reference Architecture to enable third-party PISP Operators (typically applications) to interact with the platform.  Please note that unless otherwise stipulated, all BC references pertain to the various Mojaloop components or Bounded Contexts (BCs).</p> <h2 id="terms"><a href="#terms" class="header-anchor">#</a> Terms</h2> <p>The following common terms are used in this BC:</p> <table><thead><tr><th>Term</th> <th>Description</th></tr></thead> <tbody><tr><td><strong>PISP</strong></td> <td>Payment Initiation Service Provider (e.g. PayPal, ApplePay, GooglePay, etc.)</td></tr> <tr><td><strong>DFSP</strong></td> <td>Digital Financial Service Provider (e.g. Bank, Mobile Money Operator)</td></tr> <tr><td><strong>User</strong></td> <td>DFSP/PISP client (as indicated)</td></tr></tbody></table> <h2 id="use-cases"><a href="#use-cases" class="header-anchor">#</a> Use Cases</h2> <p><strong>Note:</strong> Our Use Cases cover two specific scenarios:</p> <table><thead><tr><th>Scenarios</th> <th>Description</th></tr></thead> <tbody><tr><td><a href="#linking-scenarios">Linking</a></td> <td>PISP Housekeeping activities</td></tr> <tr><td><a href="#transfer-scenarios">Transfer</a></td> <td>PISP Transfer initiation activities</td></tr></tbody></table> <h2 id="linking-scenarios"><a href="#linking-scenarios" class="header-anchor">#</a> Linking Scenarios</h2> <h3 id="pisp-gets-supported-dfsps"><a href="#pisp-gets-supported-dfsps" class="header-anchor">#</a> PISP Gets supported DFSPs</h3> <h4 id="description"><a href="#description" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to handle authorized PISP User requests to obtain a list of DFSP Account Holders supported by the system.</p> <h4 id="flow-diagram"><a href="#flow-diagram" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaL_ucPispGetSupportedDFSPs_Feb22a.c945182c.png" alt="Use Case - PISP Gets supported DFSPs"></p> <blockquote><p>UC Workflow Diagram: PISP Gets supported DFSPs</p></blockquote> <h3 id="pisp-gets-list-of-accounts-for-a-dfsp-identifier"><a href="#pisp-gets-list-of-accounts-for-a-dfsp-identifier" class="header-anchor">#</a> PISP Gets list of accounts for a DFSP + Identifier</h3> <h4 id="description-2"><a href="#description-2" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to handle instances where  authorized PISP Users wish to lookup their DFSP Account Holder account details using their DFSP Account Holder Identifier to do so.  Typically the Identifier is embedded into a PISP-originated app or process.</p> <h4 id="flow-diagram-2"><a href="#flow-diagram-2" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaL-ucPispGetDfspAccList&amp;Id_Feb22-a.c0e3e33f.png" alt="Use Case - PISP Gets list of accounts for a DFSP + Identifier"></p> <blockquote><p>UC Workflow Diagram: PISP Gets list of accounts for a DFSP + Identifier</p></blockquote> <h3 id="pisp-consent-request"><a href="#pisp-consent-request" class="header-anchor">#</a> PISP Consent Request</h3> <h4 id="description-3"><a href="#description-3" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to handle instances where an authorised PISP User notifies their DFSP Account Holder of their intention to link one or more of their accounts to a PISP via a Consent Request.  The request is fulfilled via an out-of-band <a href="#dfsp-issue-consent">Issue Consent</a> process upon receipt of an authorization confirmation request response.  The result of this process is the establishment of a trust relationship between the PISP User, the PISP, and the DFSP Account Holder.  The Switch updates participant account details accordingly.</p> <h4 id="flow-diagram-3"><a href="#flow-diagram-3" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaL_ucPispConsentRequest_Feb22a.94320a08.png" alt="Use Case - PISP Consent Request"></p> <blockquote><p>UC Workflow Diagram: PISP Consent Request</p></blockquote> <h3 id="dfsp-issue-consent"><a href="#dfsp-issue-consent" class="header-anchor">#</a> DFSP Issue Consent</h3> <h4 id="description-4"><a href="#description-4" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to handle instances in which a DFSP Account Holder responds to a Consent Request received from an authorised and authenticated PISP User.  The DFSP Account Holder issues a request to the PISP via the Switch for the PISP User to create an identifying Credential on their device.  Upon receipt of the identifying Credential, verified by the issuing DFSP Account Holder, both the Switch and the DFSP Account Holder Account records are updated with the PISP User Credential and linked Accounts, and the PISP User is notified that their DFSP Account Holder Account/s has/have been successfully linked to their PISP profile.</p> <p><em><strong>Note:</strong></em> <em>The Consent Issue is in response to a Consent Request made by an authorised PISP User to link one or more of their DFSP Account Holder Accounts to their PISP profile and follows the workflow noted in the <a href="#pisp-consent-request">PISP Consent Request</a> UC above</em></p> <h4 id="flow-diagram-4"><a href="#flow-diagram-4" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaL_ucDfspIssueConsent_Feb22a_P1&amp;2.66a7c897.png" alt="Use Case - DFSP Issue Consent"></p> <blockquote><p>UC Worflow Diagram - DFSP Issue Consent</p></blockquote> <h3 id="unlink-accounts-hub-hosted-auth"><a href="#unlink-accounts-hub-hosted-auth" class="header-anchor">#</a> Unlink Accounts: Hub Hosted Auth</h3> <h4 id="description-5"><a href="#description-5" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to handle an authorised PISP/DFSP Account Holder request to revoke consent for a DFSP Account Holder Account to be linked to their PISP Profile, which the Switch acts upon by updating the system Account Lookup Service to disassociate the PISP Participant/DFSP Account association, and notifying both the DFSP Account Holder (who removes the ALS Participant entry and Link from their system), and the PISP Host who sends a fulfilment notification to the User.</p> <h4 id="flow-diagram-5"><a href="#flow-diagram-5" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaL_ucUnlinkAccounts-HubHostAuth_Feb22-a_P1&amp;2.23240595.png" alt="Use Case - Unlink Accounts - Hub Hosted Auth"></p> <blockquote><p>UC Workflow Diagram: Unlink Accounts - Hub Hosted Auth</p></blockquote> <h3 id="link-accounts-account-discovery-failure"><a href="#link-accounts-account-discovery-failure" class="header-anchor">#</a> Link Accounts - Account Discovery Failure</h3> <h4 id="description-6"><a href="#description-6" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to handle instances in which an authorised PISP User initiates a request to link a DFSP Account to their PISP Profile using an invalid DFSP/Identifier pair not recognized by the DFSP. The DFSP messages the Switch with an error, which notifies the appropriate PISP, and the User receives a message to try another DFSP/Indentifier pair.</p> <h4 id="flow-diagram-6"><a href="#flow-diagram-6" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaL-ucLinkAccnts-AccntDiscoveryFail_Mar22-a.130cc5a5.png" alt="Use Case - Link Accounts - Account Discovery Failure"></p> <blockquote><p>UC Workflow Diagram: Link Accounts - Account Discovery Failure</p></blockquote> <h3 id="link-accounts-dfsp-rejects-consent-request"><a href="#link-accounts-dfsp-rejects-consent-request" class="header-anchor">#</a> Link Accounts - DFSP Rejects Consent Request</h3> <h4 id="description-7"><a href="#description-7" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to correctly handle instances where an authorized PISP User requests one or more accounts to be linked to their PISP Profile by the DFSP Account Holder.  Where the DFSP Account Holder denies consent for the linking to go ahead for whatever reason, e.g.: a selected account does not support linking, it will message the Switch with an error condition.  The Switch notifies the appropriate PISP, and the PISP User receives a message, in-app or otherwise, to retry their request as the previous account linking request failed.</p> <h4 id="flow-diagram-7"><a href="#flow-diagram-7" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaL-ucLinkAccnts-DfspRejectConsentReq_Mar22-a.edfd131d.png" alt="Use Case - Link Accounts - DFSP Rejects Consent Request"></p> <blockquote><p>UC Workflow Diagram: Link Accounts - DFSP Rejects Consent Request</p></blockquote> <h3 id="credential-registration-error"><a href="#credential-registration-error" class="header-anchor">#</a> Credential Registration Error</h3> <h4 id="description-8"><a href="#description-8" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to handle instances where a DFSP Account Holder provides a PISP with a request for a (PISP) User to create a device-embedded credential in order to confirm a Consent Request, and where the credential, which when sent to the DFSP includes either an invalid signed challenge or signed metadata that is rejected.  In this instance the DFSP messages the error condition to the Switch, which messages the appropriate PISP who notifies the (PISP) User that the Consent credential was rejected.</p> <h4 id="flow-diagram-8"><a href="#flow-diagram-8" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaL-ucCredentialRegError_Mar22-a_P1&amp;2.02e7bac2.png" alt="Use Case - Credential Registration Error"></p> <blockquote><p>UC Workflow Diagram: Credential Registration Error</p></blockquote> <h3 id="unlink-accounts-consent-not-found"><a href="#unlink-accounts-consent-not-found" class="header-anchor">#</a> Unlink Accounts - Consent not found</h3> <h4 id="description-9"><a href="#description-9" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to handle instances where an authorized PISP User is asked to confirm a consent request issued via either the PISP or DFSP Account Holder to unlink their DFSP Account from their PISP Profile.  The Switch refers the consent request response to the Consent Oracle for confirmation of the Consent Owner ID.  In instances where the Oracle is unable to confirm the ID of the Consent Owner, the request is failed.  The PISP User is alerted via the DFSP Account Holder or PISP profile holder, that the DFSP Account that they sought to unlink from their PISP profile was not found.</p> <h4 id="flow-diagram-9"><a href="#flow-diagram-9" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaL-ucUnlinkAccnts-ConsentNotFound_Mar22a.110857cc.png" alt="Use Case - Unlink Accounts - Consent not found"></p> <blockquote><p>UC Workflow Diagram: Unlink Accounts - Consent Not Found</p></blockquote> <h3 id="dspf-rejects-otp-auth-token-from-pisp"><a href="#dspf-rejects-otp-auth-token-from-pisp" class="header-anchor">#</a> DSPF Rejects OTP/Auth Token from PISP</h3> <h4 id="description-10"><a href="#description-10" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to handle instances where an authorised PISP User requests one or more of their DFSP Account Holder Accounts to be linked to their PISP Profile.  The request is directed by the Switch to the DFSP Account Holder who issues an OTP/Web Login Flow to the PISP User for verification purposes which is returned via the PISP to the Switch, and then to the DFSP Account Holder for consent.  In instances where the response token is altered or expired, the DFSP Account Holder issues a error condition message to the Switch and the PISP User is notified that the DFSP Account linking request failed.</p> <h4 id="flow-diagram-10"><a href="#flow-diagram-10" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaL-ucDfspRejectsOtpAuthTokenFromPisp_Mar22-a_P1&amp;2.f1007351.png" alt="Use Case - DFSP Rejects OTP/Auth Token from PISP"></p> <blockquote><p>UC Workflow Diagram: DFSP Rejects OTP/Auth Token from PISP</p></blockquote> <h3 id="unlink-accounts-downstream-failure"><a href="#unlink-accounts-downstream-failure" class="header-anchor">#</a> Unlink Accounts - Downstream Failure</h3> <h4 id="description-11"><a href="#description-11" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to handle instances in which an authorised PISP User’s DFSP Account unlink consent confirmation fails the Switch’s Authentication/Authorisation process for whatever reason, example: a downstream FSPIOP API error.  The error is messaged by the Switch to the DFSP Account Holder who will review the error and determine how to respond.  Where an error has occured, the PISP User is notified by the Switch via the PISP that their request to unlink their DFSP Account failed.</p> <h4 id="flow-diagram-11"><a href="#flow-diagram-11" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaL-ucUnlinkAccntsDownstrmFail_Mar22-a_P1&amp;2.2bd056e4.png" alt="Use Case - Unlink Accounts - Downstream Failure"></p> <blockquote><p>UC Workflow Diagram: Unlink Accounts - Downstream Failure</p></blockquote> <h2 id="transfer-scenarios"><a href="#transfer-scenarios" class="header-anchor">#</a> Transfer Scenarios</h2> <p><em><strong>Note:</strong></em> <em>In the interests of compacting this workflow description, the reader should note that the Third Party API and the 3rd-Party Initiated Payments BCs work in concert to maintain Participant Information.  The interaction between the two BCs will not be specifically noted, but is as follows: where the Third Party API BC updates the Transaction state, and where the Participant Information is not cached, the 3rd-Party Initiated Payments BC will request the missing Participant Information from the Participant Lifecycle Management BC and deliver it to the Third Party API BC for inclusion in the Transaction information being presented to the DFSP/PISP systems.</em></p> <h3 id="third-party-initiated-transaction-request"><a href="#third-party-initiated-transaction-request" class="header-anchor">#</a> Third Party Initiated Transaction Request</h3> <h4 id="description-12"><a href="#description-12" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to permit authorized PISP Users/Apps to issue a request to a DFSP to execute a transaction on behalf of an Account Holder, typically the PISP User/App, in favor of a third-party recipient or recipients.  The transaction is vetted via a DFSP confirmation request to the Account Holder, and concluded upon successful receipt of confirmation.  The Switch, per DFSP instructions, manages the transaction and updates all accounts accordingly.</p> <p>Some suggested applications of Third Party Payment Initiation UC include:</p> <ul><li>Peer to Peer Payments (e.g.: GPay in India)</li> <li>Online checkouts for seamless end-user user experience (UX) (e.g.: PayPal)</li> <li>Payroll Clearing Software</li></ul> <h4 id="flow-diagram-12"><a href="#flow-diagram-12" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaT-ucThirdPartyInitTransactReq_Mar22-a_P1P2P3bP4.42f98723.png" alt="Use Case - Third Party Initiated Transaction Request"></p> <blockquote><p>UC Workflow Diagram: Third Party Initiated Transaction Request</p></blockquote> <h3 id="pisp-bulk-transaction-request"><a href="#pisp-bulk-transaction-request" class="header-anchor">#</a> PISP Bulk Transaction Request</h3> <h4 id="description-13"><a href="#description-13" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to permit authorized PISP Users/Apps to issue a request to a DFSP to execute a number of bulk transactions on behalf of an Account Holder, typically the PISP User/App, in favor of a group of third-party recipients.  The transaction is vetted via a DFSP confirmation request sent to the Account Holder, and concluded upon successful receipt of confirmation.  The Switch, per DFSP instructions, manages the transaction and updates all accounts accordingly.</p> <h4 id="flow-diagram-13"><a href="#flow-diagram-13" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaT-ucThirdPartyInitTransactReq_Mar22-a_P1P2P3bP4.42f98723.png" alt="Use Case - Example REPLACE ME"></p> <blockquote><p>UC Workflow Diagram: PISP Bulk Transaction Request</p></blockquote> <h3 id="pay-to-a-pisp-pisp-as-a-payee"><a href="#pay-to-a-pisp-pisp-as-a-payee" class="header-anchor">#</a> Pay To A PISP - PISP As A Payee</h3> <h4 id="description-14"><a href="#description-14" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to permit authorized DFSP Users to initiate and execute payments in favor of PISPs as Payees via the Switch.  The workflow provides support for payments for both single or multiple PISP Payee/s.</p> <h4 id="flow-diagram-14"><a href="#flow-diagram-14" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaT-ucPayToPisp-PispAsPayee_Mar22-b_P1-2.8c7fc43b.png" alt="Use Case - Pay to a PISP - PISP as a Payee"></p> <blockquote><p>UC Workflow Diagram: Pay To A PISP - PISP As Payee</p></blockquote> <h3 id="third-party-transaction-request-failed-bad-party-lookup"><a href="#third-party-transaction-request-failed-bad-party-lookup" class="header-anchor">#</a> Third Party Transaction Request Failed - Bad Party Lookup</h3> <h4 id="description-15"><a href="#description-15" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to handle instances where an authorised PISP User initiates a transaction using an invalid Participant Identifier.  The Switch encounters the error during the Get Parties stage of the transaction preparation, and automatically terminates the request with notification sent to the request originating User indicating the failure and the reason.</p> <h4 id="flow-diagram-15"><a href="#flow-diagram-15" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaT-ucTransactReqFail-BadPartyLookup_Mar22-b.1a35f474.png" alt="Use Case - Example REPLACE ME"></p> <blockquote><p>UC Workflow Diagram: Third Party Transaction Request Failed - Bad Party Lookup</p></blockquote> <h3 id="third-party-transaction-request-failed-bad-transaction-request"><a href="#third-party-transaction-request-failed-bad-transaction-request" class="header-anchor">#</a> Third Party Transaction Request Failed - Bad Transaction Request</h3> <h4 id="description-16"><a href="#description-16" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to handle instances where an authorised PISP User initiates a Third Party Transaction Request, correctly confirms the Payee details, but the Payee DFSP fails to locate a valid Agreement for the transaction.  The Switch rejects the request and sends notification to the request originating User indicating the failure and suggested follow-up actions.</p> <h4 id="flow-diagram-16"><a href="#flow-diagram-16" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaT-ucTransactReqFail-BadTransactReq_Mar22-b.5d93c00d.png" alt="Use Case - Third Party Transaction Request Failed - Bad Transaction Request"></p> <blockquote><p>UC Workflow Diagram: Third Party Transaction Request Failed - Bad Transaction Request</p></blockquote> <h3 id="third-party-transaction-request-failed-downstream-fspiop-failure"><a href="#third-party-transaction-request-failed-downstream-fspiop-failure" class="header-anchor">#</a> Third Party Transaction Request Failed - Downstream FSPIOP Failure</h3> <h4 id="description-17"><a href="#description-17" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to handle instances where an authorized PISP User requests and confirms a transaction request, which when forwarded to the DFSP Account Holder fails for some reason during the quote process.  The Switch is alerted to the failure, and provides a notification to the PISP User via their PISP App/Process.</p> <h4 id="flow-diagram-17"><a href="#flow-diagram-17" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaT-ucTransactReqFail-DownStreamFspiopFail_Mar22-b-P1-2.ffda6684.png" alt="Use Case - Third Party Transaction Request Failed - downstream FSPIOP failure"></p> <blockquote><p>UC Workflow Diagram: Third Party Transaction Request Failed - Downstream FSPIOP Failure</p></blockquote> <h3 id="third-party-transaction-request-failed-authorization-was-invalid"><a href="#third-party-transaction-request-failed-authorization-was-invalid" class="header-anchor">#</a> Third Party Transaction Request Failed - Authorization Was Invalid</h3> <h4 id="description-18"><a href="#description-18" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to handle instances where a third-party transaction journey is initiated, then authorised by a PISP User on request from the DFSP Account Holder, and the Switch detects that the DFSP Challenge response received contained an invalid signature.  The Switch can then verify that the error has occurred and notify the DFSP Account Holder who in turn cancels the transaction and the notifies the PISP User via the Switch and their PISP profile holder.</p> <h4 id="flow-diagram-18"><a href="#flow-diagram-18" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaT-ucTransactReqFail-AuthInvalid_Mar22-a-P1-3.0fb2e24d.png" alt="Use Case - Third Party Transaction Request Failed - authorization was invalid"></p> <blockquote><p>UC Workflow Diagram: Third Party Transaction Request Failed - Authorization Was Invalid</p></blockquote> <h3 id="third-party-transaction-request-rejected-by-user"><a href="#third-party-transaction-request-rejected-by-user" class="header-anchor">#</a> Third Party Transaction Request Rejected by user</h3> <h4 id="description-19"><a href="#description-19" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to handle instances where a PISP User initiates and confirms a transaction via their PISP, but then declines to complete it upon receipt of the DFSP Account Holder quotation acceptance and signature challenge.  Once the transaction is declined, the PISP notifies the DFSP Account Holder via the Switch, who proceeds to cancel the transaction and send a transaction cancellation confirmation notification to the originating PISP.</p> <h4 id="flow-diagram-19"><a href="#flow-diagram-19" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaT-ucTransactReqFail-rejectedByUser_Mar22-a-P1-3.69346a6c.png" alt="Use Case - Third Party Transaction Request Rejected by user"></p> <blockquote><p>UC Workflow Diagram: Third Party Transaction Request Rejected By User</p></blockquote> <h3 id="third-party-transaction-request-failed-dfsp-timeout"><a href="#third-party-transaction-request-failed-dfsp-timeout" class="header-anchor">#</a> Third Party Transaction Request Failed - DFSP timeout</h3> <h4 id="description-20"><a href="#description-20" class="header-anchor">#</a> Description</h4> <p>The workflow provided by this UC enables the Switch to handle instances where a PISP User initiates and confirms a transaction via their PISP, but then fails to respond to the DFSP Account Holder quotation acceptance and signature challenge within a predetermined timeout period.  Once the timeout is exceeded, the PISP notifies the DFSP Account Holder via the Switch that the required response was not received, and the DFSP cancels the transaction, sending a notification to the PISP User advising them that their transaction request failed.</p> <h4 id="flow-diagram-20"><a href="#flow-diagram-20" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/ML2RA_3PaT-ucTransactReqFail-dfspTimeout_Mar22-a-P1-3.a45354cc.png" alt="Use Case - Third Party Transaction Request Failed - DFSP timeout"></p> <blockquote><p>UC Workflow Diagram: Third Party Transaction Request Failed - DFSP Timeout</p></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/10/2022, 10:39:25 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/reference-architecture-doc/boundedContexts/settlements/" class="prev">
        Settlements
      </a></span> <span class="next"><a href="/reference-architecture-doc/boundedContexts/transfers/">
        Transfers
      </a>
      →
    </span></p></div> </main> <!----></div></div> <!----></div><div class="global-ui"><!----></div></div>
    
    <script src="/reference-architecture-doc/assets/js/app.47e5814f.js" defer></script><script src="/reference-architecture-doc/assets/js/2.3ac1e7fc.js" defer></script><script src="/reference-architecture-doc/assets/js/4.d9c80617.js" defer></script>
  </body>
</html>
