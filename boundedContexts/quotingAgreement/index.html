<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Quoting/Agreements BC | Mojaloop Reference Architecture Docs 1.0</title>
    <meta name="description" content="">
    
    <meta name="description" content="Mojaloop Reference Architecture 1.0">
    <meta name="theme-color" content="#00a3ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/reference-architecture-doc/assets/css/0.styles.a9215771.css" as="style"><link rel="preload" href="/reference-architecture-doc/assets/js/app.47e5814f.js" as="script"><link rel="preload" href="/reference-architecture-doc/assets/js/2.3ac1e7fc.js" as="script"><link rel="preload" href="/reference-architecture-doc/assets/js/8.bdea22b7.js" as="script"><link rel="prefetch" href="/reference-architecture-doc/assets/js/10.77d1b646.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/11.f017ab1c.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/12.c7026b16.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/13.4febd9c0.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/14.57caae8c.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/15.b07c017b.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/16.3ac154af.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/17.8243e98d.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/18.3a69e714.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/19.0b7c03b1.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/20.61b63a5d.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/21.666f1c41.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/22.be4b8586.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/23.d7daab1f.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/24.e0a18238.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/25.a07d8052.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/26.787f61cf.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/27.73a40601.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/28.55a9778f.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/29.37a5f920.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/3.e8dadafc.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/30.21d27da2.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/31.b7f305ac.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/32.3f3135ee.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/33.75f280dd.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/34.e91333d3.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/35.a858bbcb.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/4.d9c80617.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/5.e4e4f7f9.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/6.125a8a02.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/7.518ab3a0.js"><link rel="prefetch" href="/reference-architecture-doc/assets/js/9.fb12be10.js">
    <link rel="stylesheet" href="/reference-architecture-doc/assets/css/0.styles.a9215771.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="main-docs-wrapper"><div class="main-content-wrapper"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/reference-architecture-doc/" class="home-link router-link-active"><img src="/reference-architecture-doc/mojaloop_logo_med.png" alt="Mojaloop Reference Architecture Docs 1.0" class="logo"> <span class="site-name can-hide">Mojaloop Reference Architecture Docs 1.0</span></a> <!----> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/reference-architecture-doc/introduction/" class="nav-link">
  Introduction
  <!----></a></div><div class="nav-item"><a href="https://mojaloop.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mojaloop
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div> <!----></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/reference-architecture-doc/introduction/" class="nav-link">
  Introduction
  <!----></a></div><div class="nav-item"><a href="https://mojaloop.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mojaloop
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/reference-architecture-doc/introduction/" class="sidebar-link">Introduction</a></li><li><a href="/reference-architecture-doc/refarch/" class="sidebar-link">Reference Architecture Overview</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/reference-architecture-doc/boundedContexts/" class="sidebar-heading clickable router-link-active open active"><span>Bounded Contexts</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49.484 28.284" class="sidebar-arrow down"><g transform="translate(-229 -126.358)"><rect fill="currentColor" width="35" height="5" rx="2" transform="translate(229 151.107) rotate(-45)"></rect> <rect fill="currentColor" width="35" height="5" rx="2" transform="translate(274.949 154.642) rotate(-135)"></rect></g></svg></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/reference-architecture-doc/boundedContexts/commonTermsConventions/" class="sidebar-link">Common Terms &amp; Conventions</a></li><li><a href="/reference-architecture-doc/boundedContexts/accountLookupAndDiscovery/" class="sidebar-link">Account Lookup &amp; Discovery</a></li><li><a href="/reference-architecture-doc/boundedContexts/accountsAndBalances/" class="sidebar-link">Accounts &amp; Balances</a></li><li><a href="/reference-architecture-doc/boundedContexts/quotingAgreement/" aria-current="page" class="active sidebar-link">Quoting/Agreements</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/quotingAgreement/#terms" class="active sidebar-link">Terms</a></li><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/quotingAgreement/#functional-overview" class="sidebar-link">Functional Overview</a></li><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/quotingAgreement/#use-cases" class="sidebar-link">Use Cases</a></li><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/quotingAgreement/#canonical-quote-model" class="sidebar-link">Canonical Quote Model</a></li><li class="sidebar-sub-header"><a href="/reference-architecture-doc/boundedContexts/quotingAgreement/#concluding-comments" class="sidebar-link">Concluding comments</a></li></ul></li><li><a href="/reference-architecture-doc/boundedContexts/auditing/" class="sidebar-link">Auditing</a></li><li><a href="/reference-architecture-doc/boundedContexts/fspInteropApi/" class="sidebar-link">FSP Interop API</a></li><li><a href="/reference-architecture-doc/boundedContexts/logging/" class="sidebar-link">Logging</a></li><li><a href="/reference-architecture-doc/boundedContexts/notificationsAndAlerts/" class="sidebar-link">Notifications And Alerts</a></li><li><a href="/reference-architecture-doc/boundedContexts/participantLifecycleManagement/" class="sidebar-link">Participant Lifecycle Management</a></li><li><a href="/reference-architecture-doc/boundedContexts/reporting/" class="sidebar-link">Reporting</a></li><li><a href="/reference-architecture-doc/boundedContexts/scheduling/" class="sidebar-link">Scheduling</a></li><li><a href="/reference-architecture-doc/boundedContexts/security/" class="sidebar-link">Security</a></li><li><a href="/reference-architecture-doc/boundedContexts/settlements/" class="sidebar-link">Settlements</a></li><li><a href="/reference-architecture-doc/boundedContexts/thirdPartyApi/" class="sidebar-link">Third Party API</a></li><li><a href="/reference-architecture-doc/boundedContexts/transfers/" class="sidebar-link">Transfers</a></li></ul></section></li><li><a href="/reference-architecture-doc/boundedContexts/commonInterfaces/" class="sidebar-link">Common Interface List</a></li><li><a href="/reference-architecture-doc/howToImplement/" class="sidebar-link">How to Implement</a></li><li><a href="/reference-architecture-doc/glossary/" class="sidebar-link">Glossary</a></li><li><a href="/reference-architecture-doc/furtherReading/" class="sidebar-link">Further Reading</a></li></ul> </aside> <main class="page"> <div class="content content__default"><h1 id="quoting-agreements-bc"><a href="#quoting-agreements-bc" class="header-anchor">#</a> Quoting/Agreements BC</h1> <p>The Quoting and Agreements Bounded Context provides Participants with quotations for undertaking transfers, and records the participant accept/reject responses.</p> <h2 id="terms"><a href="#terms" class="header-anchor">#</a> Terms</h2> <p>The following terms are used in this BC, also known as a domain.</p> <table><thead><tr><th>Term</th> <th>Description</th></tr></thead> <tbody><tr><td><strong>(D)FSP</strong></td> <td>(Digital) Financial Services Provider</td></tr> <tr><td><strong>Participant</strong></td> <td>Financial Services Provider</td></tr></tbody></table> <h2 id="functional-overview"><a href="#functional-overview" class="header-anchor">#</a> Functional Overview</h2> <p><img src="/reference-architecture-doc/assets/img/qtaFunctionalOverview_20210825.60172950.png" alt="Use Case - Functional Overview"></p> <h2 id="use-cases"><a href="#use-cases" class="header-anchor">#</a> Use Cases</h2> <h3 id="calculate-quote-happy-path"><a href="#calculate-quote-happy-path" class="header-anchor">#</a> Calculate Quote - Happy Path</h3> <h4 id="description"><a href="#description" class="header-anchor">#</a> Description</h4> <p>This process obtains an array of relevant Participant data including status flags, calculates the cost of Transfer including fees, and provides it to the Participant/s.  It also able to support the storing of Participants requests &amp; responses (i.e. accept or reject the quote).</p> <h4 id="flow-diagram"><a href="#flow-diagram" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/qtaCalculateQuoteHappyPath_20210825.c27225e5.png" alt="Use Case - Calculate Quote - Happy Path"></p> <h3 id="get-quote-happy-path"><a href="#get-quote-happy-path" class="header-anchor">#</a> Get Quote - Happy Path</h3> <h4 id="description-2"><a href="#description-2" class="header-anchor">#</a> Description</h4> <p>Process to obtain and deliver existing Quote details to Participant/s on request.</p> <h4 id="flow-diagram-2"><a href="#flow-diagram-2" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/qtaGetQuoteHappyPath.14203834.png" alt="Use Case - Example REPLACE ME"></p> <h3 id="calculate-quote-invalid-quote-request"><a href="#calculate-quote-invalid-quote-request" class="header-anchor">#</a> Calculate Quote - Invalid Quote Request</h3> <h4 id="description-3"><a href="#description-3" class="header-anchor">#</a> Description</h4> <p>Process that enables the system to invalidate quote requests by monitoring and responding to invalid Request Events, FSPs, or duplicate requests.</p> <h4 id="flow-diagram-3"><a href="#flow-diagram-3" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/qtaCalculateQuoteInvalidQuoteRequest_20210825.0c0dea1e.png" alt="Use Case - Calculate Quote - Invalid Quote Request"></p> <h3 id="calculate-quote-invalid-fsps"><a href="#calculate-quote-invalid-fsps" class="header-anchor">#</a> Calculate Quote - Invalid FSPs</h3> <h4 id="description-4"><a href="#description-4" class="header-anchor">#</a> Description</h4> <p>Process that enables the system to invalidate FSP quote requests where the FSP details mismatch the original Quote for either one or both Participants.</p> <h4 id="flow-diagram-4"><a href="#flow-diagram-4" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/qtaCalculateQuoteInvalidFSPs_20210825.557eb96f.png" alt="Use Case - Calculate Quote - Invalid FSPs"></p> <h3 id="calculate-quote-invalid-scheme-rules-detected-in-request"><a href="#calculate-quote-invalid-scheme-rules-detected-in-request" class="header-anchor">#</a> Calculate Quote - Invalid Scheme Rules Detected In Request</h3> <h4 id="description-5"><a href="#description-5" class="header-anchor">#</a> Description</h4> <p>Process to enable the system to invalidate quote requests where Scheme Rules are violated, by one or more Participants, for example where Quote Period Limit reached.</p> <h4 id="flow-diagram-5"><a href="#flow-diagram-5" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/qtaCalculateQuoteInvalidSchemeRulesRequest_20210825.b817c1c5.png" alt="Use Case - Calculate Quote - Invalid Scheme Rules detected in Request"></p> <h3 id="calculate-quote-invalid-scheme-rules-detected-in-response"><a href="#calculate-quote-invalid-scheme-rules-detected-in-response" class="header-anchor">#</a> Calculate Quote - Invalid Scheme Rules Detected In Response</h3> <h4 id="desciption"><a href="#desciption" class="header-anchor">#</a> Desciption</h4> <p>Process to enable the system to invalidate quote reponses where Scheme Rules are violated by one or more Participants, for example, where invalid terms are detected.</p> <h4 id="flow-diagram-6"><a href="#flow-diagram-6" class="header-anchor">#</a> Flow Diagram</h4> <p><img src="/reference-architecture-doc/assets/img/qtaCalculateQuoteInvalidSchemeRulesResponse_20210825.10bd23b7.png" alt="Use Case - Calculate Quote - Invalid Scheme Rules detected in response"></p> <h2 id="canonical-quote-model"><a href="#canonical-quote-model" class="header-anchor">#</a> Canonical Quote Model</h2> <p>The canonical model stores the following details of quotations in the Quotes &amp; Agreements BC:</p> <ul><li>Quote ID</li> <li>Transaction ID</li> <li>Participants
<ul><li>payerId</li> <li>payeeId</li></ul></li> <li>Payer
<ul><li>Participant
<ul><li>participantId</li> <li>roleType (e.g. payer)</li></ul></li> <li>Amount Requested (initial amount)
<ul><li>Value (number)</li> <li>Currency (ISO currency code)</li></ul></li> <li>Amount to send (including fees, etc.)
<ul><li>Value (number)</li> <li>Currency (ISO currency code)</li></ul></li></ul></li> <li>Payee(s) (one or more - should all be added to the “Amount to send”)
<ul><li>‘#’
<ul><li>Participant
<ul><li>participantId</li> <li>roleType (Identify why this “payee” is receiving this amount, i.e.: fee, recipient, etc.)</li> <li>reason</li> <li>Amount to receive
<ul><li>value (number)</li> <li>currency (ISO currency code)</li></ul></li></ul></li></ul></li></ul></li> <li>Extensions</li></ul> <h2 id="concluding-comments"><a href="#concluding-comments" class="header-anchor">#</a> Concluding comments</h2> <ul><li>No red flag issues have been observed in the overall BC and Reference Architecture design.</li> <li>We need to better understand/clarify the “GET” via “POST” pattern:
<ul><li>Should a “GET” event be a simple Restful “GET”, or does the system need to support the “GET” from duplicate posts?</li> <li>Are we required to serve “GET” requests that include FSP details at a later date?</li></ul></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/31/2022, 12:22:50 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/reference-architecture-doc/boundedContexts/accountsAndBalances/" class="prev">
        Accounts &amp; Balances
      </a></span> <span class="next"><a href="/reference-architecture-doc/boundedContexts/auditing/">
        Auditing
      </a>
      →
    </span></p></div> </main> <!----></div></div> <!----></div><div class="global-ui"><!----></div></div>
    
    <script src="/reference-architecture-doc/assets/js/app.47e5814f.js" defer></script><script src="/reference-architecture-doc/assets/js/2.3ac1e7fc.js" defer></script><script src="/reference-architecture-doc/assets/js/8.bdea22b7.js" defer></script>
  </body>
</html>
